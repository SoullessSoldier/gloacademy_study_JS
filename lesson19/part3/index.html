<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson19 - part3</title>
    <style>
        #city{
        display: none;
        }
        .result{
        margin: 15px 0;
        }
    </style>
</head>
<body>
    <a href="https://codepen.io/soullesssoldier/pen/bGqJYPr" class="link">Codepen https://codepen.io/soullesssoldier/pen/bGqJYPr</a>
    <select name="country" id="country">
        <option value="rus">Россия</option>
        <option value="uk">Украина</option>
        <option value="bel">Беларусь</option>
        <option value="jap">Япония</option>
    </select>
    <select name="city" id="city"></select>
      
    <div class="result"></div>      
      
     <iframe width="560" height="315" src="https://www.youtube.com/embed/bBzkS96i2DU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    <h3>Форкните доску чтобы её сохранить у себя на доске</h3>
    <h4>Для этого предварительно надо зарегистрироваться на codepen</h4>
    <img border="1" src="http://dl4.joxi.net/drive/2020/04/17/0032/1298/2123026/26/fe01b568c8.jpg" alt="">

<script>
        const cityArr = {
        rus: ['Москва', 'Санк-Петербург', 'Новосибирск', 'Екатеринбург', 'Нижний Новгород', 'Казань', 'Челябинск'],
        uk: ['Киев', 'Харьков', 'Одесса', 'Днепр', 'Донецк', 'Запорожье', 'Львов'],
        bel: ['Минск', 'Гомель', 'Могилёв', 'Витебск', 'Гродно', 'Брест'],
        jap: ['Токио', 'Киото', 'Осака', 'Иокогама'] 
        };

        const selectCountry = document.getElementById('country');
        const selectCity = document.getElementById('city');
        const result = document.querySelector('.result');
        const iframe = document.getElementsByTagName('iframe')[0];

        const getCitiesByCountry = (countryCode) => {
        if (cityArr.hasOwnProperty(countryCode)){
            //console.log(cityArr[countryCode]);
            while (selectCity.options.length > 0) selectCity.remove(0);
        
            cityArr[countryCode].forEach(item=>{
            let option = document.createElement('option');
            option.textContent = item;
            selectCity.appendChild(option);
            });
            selectCity.style.display='block';
            selectCity.style.float='left';
            selectCountry.style.float='left';
            selectCity.insertAdjacentHTML('afterend','<br>');
        }
        
        
        };

        const showResult = (country, city) =>{
        result.textContent = `${country}, ${city}`;
        result.insertAdjacentHTML('afterend','<br>');
        };

        selectCountry.addEventListener('change',(e)=>{
        let countryCode = e.target.value;
        getCitiesByCountry(countryCode)
        });
        selectCity.addEventListener('change',(e)=>{
        let city = e.target.value;
        let country = selectCountry.selectedOptions[0].outerText;
        
        showResult(country,city);
        });
</script>
</body>
</html>