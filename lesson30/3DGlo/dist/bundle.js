(()=>{"use strict";function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var n,o,r,c,a,l,i,u,s,d,m,f,v,p,g,y,h,E,b,L,S,I,q,x,w,A,B,k,T,C,M,D,F,j,W,z,O,R,$,H,N,_,U,J,P,G,K,Q;G=document.getElementById("timer-hours"),K=document.getElementById("timer-minutes"),Q=document.getElementById("timer-seconds"),function e(){var t,n,o,r,c=(t=(new Date("16 jul 2021 23:59:59").getTime()-(new Date).getTime())/1e3,n=Math.floor(t%60),o=Math.floor(t/60%60),r=Math.floor(t/3600),Math.floor(t/86400),{timeRemaining:t,hours:r,minutes:o,seconds:n});Math.floor(c.timeRemaining)>=0&&(G.textContent=c.hours.toString().padStart(2,"0"),K.textContent=c.minutes.toString().padStart(2,"0"),Q.textContent=c.seconds.toString().padStart(2,"0"),setTimeout(e,1e3))}(),P=document.querySelector("menu"),document.addEventListener("click",(function(e){var t=e.target;(t.closest(".menu")||t.classList.contains("close-btn")||t.closest("menu")&&!t.matches("menu")||!(t=t.closest("menu"))&&P.classList.contains("active-menu"))&&P.classList.toggle("active-menu")})),H=document.querySelector(".popup"),N=document.querySelector(".popup-content"),_=document.querySelectorAll(".popup-btn"),U=50,J=function e(){z=requestAnimationFrame(e),H.offsetLeft+U<0?(O=H.offsetLeft,R=N.offsetLeft,O+=U,R+=U,H.style.left=O+"px",N.style.left=R+"px"):H.offsetLeft+U>0&&H.offsetLeft+U<U?U/=2:0===H.offsetLeft&&cancelAnimationFrame(z)},_.forEach((function(e){e.addEventListener("click",(function(){document.documentElement.clientWidth<768?H.style.display="block":(U=50,H.style.display="block",$=document.documentElement.clientWidth/2-N.clientWidth/2,H.style.left=-H.clientWidth+"px",N.style.left=-H.clientWidth+$+"px",z=requestAnimationFrame(J))}))})),H.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-close")?H.style.display="none":(t=t.closest(".popup-content"))||(H.style.display="none")})),F=document.querySelector('[href="#service-block"]'),j=F.getAttribute("href").slice(1),W=document.getElementById("".concat(j)),F.addEventListener("click",(function(e){e.preventDefault(),window.scrollTo({top:W.offsetTop,behavior:"smooth"})})),C=document.querySelector(".service-header"),M=C.querySelectorAll(".service-header-tab"),D=document.querySelectorAll(".service-tab"),C.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&M.forEach((function(e,n){e===t&&function(e){for(var t=0;t<D.length;t++)e===t?(M[t].classList.add("active"),D[t].classList.remove("d-none")):(M[t].classList.remove("active"),D[t].classList.add("d-none"))}(n)}))})),I=document.querySelectorAll(".portfolio-item"),document.querySelectorAll(".portfolio-btn"),q=document.querySelectorAll(".dot"),x=document.querySelector(".portfolio-content"),w=0,A=function(e,t,n){e[t].classList.remove(n)},B=function(e,t,n){e[t].classList.add(n)},k=function(){A(I,w,"portfolio-item-active"),A(q,w,"dot-active"),++w>=I.length&&(w=0),B(I,w,"portfolio-item-active"),B(q,w,"dot-active")},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;S=setInterval(k,e)},x.addEventListener("click",(function(e){e.preventDefault();var t=e.target;t.matches(".portfolio-btn, .dot")&&(A(I,w,"portfolio-item-active"),A(q,w,"dot-active"),t.matches("#arrow-right")?w++:t.matches("#arrow-left")?w--:t.matches(".dot")&&q.forEach((function(e,n){e===t&&(w=n)})),w>=I.length&&(w=0),w<0&&(w=I.length-1),B(I,w,"portfolio-item-active"),B(q,w,"dot-active"))})),x.addEventListener("mouseover",(function(e){e.target.matches(".portfolio-btn, .dot")&&clearInterval(S)})),x.addEventListener("mouseout",(function(e){e.target.matches(".portfolio-btn, .dot")&&T()})),T(2e3),(L=document.querySelectorAll(".command__photo")).forEach((function(e){e.addEventListener("mouseover",(function(t){b=e.src,t.target.src=e.dataset.img}))})),L.forEach((function(e){e.addEventListener("mouseout",(function(e){e.target.src=b}))})),document.querySelectorAll(".calc-item").forEach((function(e){e.addEventListener("input",(function(e){var t;(t=e.target).value=t.value.replace(/\D/g,"")}))})),n=document.getElementById("form2-name"),o=document.getElementById("form2-message"),r=document.getElementById("form2-email"),c=document.getElementById("form2-phone"),a=document.getElementById("form1-name"),l=document.getElementById("form1-email"),i=document.getElementById("form1-phone"),u=document.getElementById("form3-name"),s=document.getElementById("form3-email"),d=document.getElementById("form3-phone"),m=[document.getElementById("form1"),document.getElementById("form2"),document.getElementById("form3")],f=!1,v=new RegExp("^\\+?\\d{1}[\\(\\- ]?(\\d{3})[\\)\\- ]?[\\- ]?(\\d{3})[\\- ]?(\\d{2})[\\- ]?(\\d{2})$","gm"),p=new RegExp("^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$"),E=(g=[a,n,u]).concat(y=[l,r,s],h=[i,c,d]),o.addEventListener("input",(function(e){var t;(t=e.target).value=t.value.replace(/[^?!,.а-яё\d ]/gi,"")})),y.forEach((function(e){e.addEventListener("input",(function(e){var t;(t=e.target).value=t.value.replace(/[^a-z\d\@\-\_\.\!\~\*\+\']/gi,"")}))})),h.forEach((function(e){e.addEventListener("input",(function(e){var t;e.target.style.border="",(t=e.target).value=t.value.replace(/[^\+\d\(\)\-]/g,"")}))})),g.forEach((function(e){e.addEventListener("input",(function(e){var t;e.target.style.border="",(t=e.target).value=t.value.replace(/[^а-яё ]/gi,"")}))})),E.forEach((function(e){e.addEventListener("blur",(function(e){return(t=e.target).value=t.value.replace(/[ \-]{2,}/g," "),t.value=t.value.replace(/[\-]{2,}/g,"-"),t.value=t.value.replace(/^[ \-]/g,""),t.value=t.value.replace(/[ \-]$/g,""),void(g.includes(t)?(function(e){e.value=e.value.toLowerCase().replace(/\S{2,}/g,(function(e){return e.replace(/\S/,(function(e){return e.toUpperCase()}))}))}(t),t.value.trim().length<3?(t.style.border="2px solid red",f=!1):(t.style.border="2px solid green",f=!0)):h.includes(t)?v.test(t.value.trim())?(t.style.border="2px solid green",f=!0,console.log("flag: ",f)):(t.style.border="2px solid red",f=!1,console.log("flag: ",f)):y.includes(t)?p.test(t.value.trim())?(t.style.border="2px solid green",f=!0,console.log("flag: ",f)):(t.style.border="2px solid red",f=!1,console.log("flag: ",f)):f=!0);var t}))})),m.forEach((function(e){!function(e){e.setAttribute("disabled","true"),e.style.cursor="not-allowed"}(e.querySelector(".form-btn"))})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),r=document.querySelector(".calc-count"),c=document.querySelector(".calc-day"),a=document.getElementById("total"),l=function(){var t,l,i,u=1,s=1,d=n.options[n.selectedIndex].value/10,m=+o.value;r.value>1&&(u+=(r.value-1)/10),c.value&&c.value<5?s*=2:c.value&&c.value<10&&(s*=1.5),t=a,l=d&&m?e*d*m*u*s:0,i=null,window.requestAnimationFrame((function e(n){i||(i=n);var o=Math.min((n-i)/500,1);t.innerHTML=Math.floor(o*(l-0)+0),o<1&&window.requestAnimationFrame(e)}))};t.addEventListener("change",(function(e){var t=e.target;(t.matches("select")||t.matches("input"))&&l()}))}(100),function(){var t=document.getElementById("form1"),n=document.getElementById("form2"),o=document.getElementById("form3"),r=[t,n,o],c=document.createElement("div");c.style.cssText="font-size: 2rem;",c.classList.add("preloader-block"),r.forEach((function(e){e.addEventListener("submit",(function(t){return a(t,e)}))}));var a=function(t,n){if(t.preventDefault(),n.appendChild(c),l(n)){c.innerHTML="<section>\n        <div class='sk-three-bounce'>\n          <div class='sk-bounce-1 sk-child'></div>\n          <div class='sk-bounce-2 sk-child'></div>\n          <div class='sk-bounce-3 sk-child'></div>\n        </div>\n      </section>";var r=new FormData(n),a={};r.forEach((function(e,t){a[t]=e})),u(a).then((function(e){if(!e.ok)throw new Error("Error:",e.status," with status text:",e.statusText);n===o&&(c.style.cssText="font-size: 2rem; color: #fff"),c.textContent="Спасибо! Мы скоро с вами свяжемся!"})).catch((function(e){n===o&&(c.style.cssText="font-size: 2rem; color: #fff"),c.textContent="Что-то пошло не так",console.error(e)})).finally((function(){e(n.elements).forEach((function(e){"input"===e.tagName.toLowerCase()&&(e.value="")}))}))}},l=function(t){var n=!0;return e(t.elements).forEach((function(e){"input"!==e.tagName.toLowerCase()||e.value.trim()||(i(c,"Заполните поля в форме!"),n=!1)})),n},i=function(e,t){e.innerHTML='<font color="red">'.concat(t,"</font>"),setTimeout((function(){e.textContent=""}),2e3)},u=function(e){return fetch("./server.php",{method:"POST",mode:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}}()})();